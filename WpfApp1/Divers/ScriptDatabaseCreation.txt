CREATE TABLE dbo.person (
    mail varchar(20) NOT NULL,
    firstname varchar(20) NOT NULL,
    phone varchar(15) NOT NULL,
    password varchar(4) NOT NULL,
    idpos integer NOT NULL,
    PRIMARY KEY (mail)
);



CREATE TABLE dbo.position (
    idpos integer NOT NULL,
    namepos varchar(20) NOT NULL,
	PRIMARY KEY (idpos)
);

CREATE TABLE dbo.member (
    memberid integer NOT NULL,
    mail varchar(20) NOT NULL,
    balance integer NOT NULL,
    PRIMARY KEY (memberid)
);


CREATE TABLE dbo.bycicle (
    idbycicle integer NOT NULL,
    column1 integer NOT NULL,
    type varchar(20) NOT NULL,
    length integer NOT NULL,
    owner varchar(20) NOT NULL,
    PRIMARY KEY (idbycicle)
);



CREATE TABLE dbo.manager (
    idmanager integer NOT NULL,
    mail varchar NOT NULL,
    PRIMARY KEY (idmanager)
);




CREATE TABLE dbo.category (
    idcategory integer NOT NULL,
    namecat varchar(20) NOT NULL,
    manager integer NOT NULL
);



CREATE TABLE dbo.enrollments (
    category integer NOT NULL,
    member integer NOT NULL,
    year integer NOT NULL,
    PRIMARY KEY (category, member)
);


CREATE TABLE dbo.outing (
    idouting integer NOT NULL,
    startingpoint varchar(20) NOT NULL,
    date date NOT NULL,
    cost integer NOT NULL,
    category integer NOT NULL,
    PRIMARY KEY (idouting)
);



CREATE TABLE dbo.calendar (
    date date NOT NULL,
    categorie integer  NOT NULL,
    PRIMARY KEY (date)
);


CREATE TABLE dbo.treasurer (
    idtreasurer integer NOT NULL,
    mail varchar(20) NOT NULL,
    PRIMARY KEY (idtreasurer)
);



CREATE TABLE dbo.vehicle (
    platenumber varchar(20) NOT NULL,
    passangerseat integer NOT NULL,
    extrabikespace integer NOT NULL,
    owner integer NOT NULL,
    PRIMARY KEY (platenumber)
);




CREATE TABLE dbo.outingtransport (
    outingtransportnumber integer NOT NULL,
    platenumber  varchar(20) NOT NULL,
    outingid  integer NOT NULL
);


CREATE TABLE dbo.outingregistration (
    memberid integer NOT NULL,
    outingid integer NOT NULL,
    passanger bit NOT NULL,
    bike bit NOT NULL
);




CREATE TABLE dbo.requestpassanger (
    memberid integer NOT NULL,
    platenumber varchar(20) NOT NULL
);




CREATE TABLE dbo.requestbike (
    bikeid  integer NOT NULL,
    platenumber  varchar(20)NOT NULL
);


ALTER TABLE dbo.person ADD CONSTRAINT FK_person__pos FOREIGN KEY (idpos) REFERENCES dbo.position(idpos);
ALTER TABLE dbo.member ADD CONSTRAINT FK_member__mail FOREIGN KEY (mail) REFERENCES dbo.person(mail);
ALTER TABLE dbo.bycicle ADD CONSTRAINT FK_bycicle__owner FOREIGN KEY (owner) REFERENCES dbo.member(memberid);
ALTER TABLE dbo.manager ADD CONSTRAINT FK_manager__mail FOREIGN KEY (mail) REFERENCES dbo.person(mail);
ALTER TABLE dbo.category ADD CONSTRAINT FK_category__manager FOREIGN KEY (manager) REFERENCES dbo.manager(idmanager);
ALTER TABLE dbo.enrollments ADD CONSTRAINT FK_enrollments__category FOREIGN KEY (category) REFERENCES dbo.category(idcategory);
ALTER TABLE dbo.enrollments ADD CONSTRAINT FK_enrollments__member FOREIGN KEY (member) REFERENCES dbo.member(memberid);
ALTER TABLE dbo.outing ADD CONSTRAINT FK_outing__category FOREIGN KEY (category) REFERENCES dbo.category(idcategory);
ALTER TABLE dbo.treasurer ADD CONSTRAINT FK_treasurer__mail FOREIGN KEY (mail) REFERENCES dbo.person(mail);
ALTER TABLE dbo.vehicle ADD CONSTRAINT FK_vehicle__owner FOREIGN KEY (owner) REFERENCES dbo.member(memberid);
ALTER TABLE dbo.outingregistration ADD CONSTRAINT FK_outingregistration__memberid FOREIGN KEY (memberid) REFERENCES dbo.member(memberid);
ALTER TABLE dbo.outingregistration ADD CONSTRAINT FK_outingregistration__outingid FOREIGN KEY (outingid) REFERENCES dbo.outing(idouting);
ALTER TABLE dbo.requestpassanger ADD CONSTRAINT FK_requestpassanger__memberid FOREIGN KEY (memberid) REFERENCES dbo.member(memberid);
ALTER TABLE dbo.requestpassanger ADD CONSTRAINT FK_requestpassanger__platenumber FOREIGN KEY (platenumber) REFERENCES dbo.vehicle(platenumber);